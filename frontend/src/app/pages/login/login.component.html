<div class="login-background">
    <div class="top-bar">
        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="80px" viewBox="0 0 4 2" preserveAspectRatio="none">
            <!-- Parábola con el centro al medio apuntando hacia abajo -->
            <rect width="4" height="2" fill="#081072 " opacity="1"/>
            <path d="M 0 0 Q 0 3.5 4 0" fill="#1cba98" opacity="1"/>
            <path d="M 0 2 Q 2 1.5 4 2" fill="#1cba98" opacity="1"/>
        </svg>
    </div>
    <img src="assets/images/terrasoft-white.png" class="terra-white-image" alt="Logo">
	
    <!-- Mostrar mensaje si showMessage es true o si está cargando -->
	<div class="floating-rectangle" *ngIf="showMessage || isLoading" [innerHTML]="mensaje_login | newline"></div>
	
	<div class="login-container">
       
        <form #loginForm="ngForm" (ngSubmit)="onSubmit()">
            <div class="input-icon-container">
                <img src="assets/images/user.png" class="input-icon">
                <input type="text" id="usuario" name="usuario" (input)="formatRUT($event)" [(ngModel)]="rut" required placeholder="RUT" class="login-field">
            </div>
            
            <div class="input-icon-container">
                <img src="assets/images/key.png" class="input-icon">
                <input type="password" id="password" name="password" [(ngModel)]="password" required placeholder="CONTRASEÑA" class="login-field">
            </div>
            
            <input type="submit" value="Ingresar" class="login-button">
        </form>
        <a href="javascript:void(0);" (click)="onForgotPassword()" class="change-password">¿Olvidó su contraseña?/Cambiar Contraseña</a>
    </div>

    <!-- Modal para ingresar RUT -->
    <div *ngIf="showRutModal" class="modal-overlay">
        <div class="modal-container">
            <div class="modal-content">
                <span class="close" (click)="closeModal()">&times;</span>
                <h2>Ingrese su RUT</h2>
                <input type="text" [(ngModel)]="rutForRecovery" (input)="formatRUT($event)" placeholder="INGRESE SU RUT">
                <button class="modal-button" (click)="checkRut()">Continuar</button>
            </div>
        </div>
    </div>
    
    <!-- Modal para ingresar correo -->
    <div *ngIf="showEmailModal" class="modal-overlay">
        <div class="modal-container">
        <div class="modal-content">
            <span class="close" (click)="closeModal()">&times;</span>
            <h2>Ingrese su correo electrónico</h2>
            <input type="email" [(ngModel)]="emailForRecovery" placeholder="Ingrese su correo electrónico">
            <button class="modal-button" (click)="sendCode()">Enviar código</button>
        </div>
        </div>
    </div>
    
    <!-- Modal para ingresar código -->
    <div *ngIf="showCodeModal" class="modal-overlay">
        <div class="modal-container">
        <div class="modal-content">
            <span class="close" (click)="closeModal()">&times;</span>
            <h2>Ingrese el código de verificación</h2>
            <input type="text" [(ngModel)]="codeForRecovery" placeholder="Ingrese el código">
            <button class="modal-button" (click)="verifyCode()">Verificar código</button>
        </div>
        </div>
    </div>

    <div class="low-bar">
        <div class="bar-text">By Terrasoft Ⓡ Todos los derechos reservados</div>
    </div>
    <div class="curved-bar">
        <svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 100 20" preserveAspectRatio="none">
            <rect width="100" height="20" fill="#0F52BA" opacity="1"/>
            <path d="M 0 20 C 30 0, 100 -15, 100 20" fill="#00A693" opacity="1"/>
        </svg>
    </div>
    <div id="change-password-modal" class="correo-modal" style="display: none;">
        <div class="correo-modal-content">
            <span class="close-correo-modal" onclick="closeModal()">&times;</span>
            <h2>Por favor ingrese su correo</h2>
            <input type="email" id="emailForPasswordChange" name="email" placeholder="Ingrese su correo aquí" class="correo-modal-input">
            <button class="login-button" onclick="submitChangePassword()">Enviar</button>
        </div>
    </div>
</div>
