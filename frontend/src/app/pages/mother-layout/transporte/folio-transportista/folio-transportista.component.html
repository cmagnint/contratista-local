<div class="admin-perfiles-container" (click)="deseleccionarFila($event)">
    <!-- Botones principales de acción -->
    <button mat-raised-button color="primary" class="custom-button" (click)="openModal('crearFolio')">
      Crear Folio
    </button>
    <button mat-raised-button color="primary" class="custom-button" 
      [disabled]="!(selectedRows.length > 0 && selectedRows.length < 2)" 
      (click)="openModal('modificarFolio'); $event.stopPropagation()">
      Modificar Folio
    </button>
    <button mat-raised-button color="primary" class="custom-button" 
      [disabled]="!(selectedRows.length > 0)" 
      (click)="openModal('confirmacionModal')">
      Eliminar Folio
    </button>
  
    <!-- Modal para Crear Folio -->
    <div id="modalCrearFolio" class="modal-trabajadores" *ngIf="modals['crearFolio']" (click)="closeModal('crearFolio')">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <div class="title-container">
            <h2>Crear Folio Transportista</h2>
          </div>
        </div>
  
        <h4 class="h4-subtitle">Folio Comercial:</h4>
        <div class="input-container">
          <select class="input-perfil" [(ngModel)]="newFolio.folio_comercial">
            <option [ngValue]="0">Seleccione un folio comercial</option>
            <option *ngFor="let folio of foliosComerciales" [value]="folio.id">
              FOLIO {{folio.id}}
            </option>
          </select>
        </div>
  
        <h4 class="h4-subtitle">Valor de Pago:</h4>
        <input type="number" class="input-perfil" [(ngModel)]="newFolio.valor_pago_transportista">
  
        <h4 class="h4-subtitle">Valor de Facturación:</h4>
        <input type="number" class="input-perfil" [(ngModel)]="newFolio.valor_facturacion_transportista">
  
        <h4 class="h4-subtitle">Tramo:</h4>
        <div class="input-container">
          <select class="input-perfil" [(ngModel)]="newFolio.tramo">
            <option [ngValue]="0">Seleccione un tramo</option>
            <option *ngFor="let tramo of tramos" [value]="tramo.id">
              {{tramo.origen}} - {{tramo.destino}}
            </option>
          </select>
        </div>
  
        <button class="custom-button-ingreso" (click)="crearFolio()">Ingresar Folio</button>
      </div>
    </div>
  
    <!-- Modal para Modificar Folio -->
    <div id="modalModificarFolio" class="modal-perfiles" *ngIf="modals['modificarFolio']" (click)="closeModal('modificarFolio')">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <span class="close" (click)="closeModal('modificarFolio')">&times;</span>
          <div class="header-bar"></div>
          <div class="title-container">
            <h2>Modificar Folio Transportista</h2>
          </div>
        </div>
  
        <h4 class="h4-subtitle">Folio Comercial:</h4>
        <div class="input-container">
          <select class="input-perfil" [(ngModel)]="selectedFolio.folio_comercial">
            <option [ngValue]="0">Seleccione un folio comercial</option>
            <option *ngFor="let folio of foliosComerciales" [value]="folio.id">
                FOLIO {{ folio.id}}
            </option>
          </select>
        </div>
  
        <h4 class="h4-subtitle">Valor de Pago:</h4>
        <input type="number" class="input-perfil" [(ngModel)]="selectedFolio.valor_pago_transportista">
  
        <h4 class="h4-subtitle">Valor de Facturación:</h4>
        <input type="number" class="input-perfil" [(ngModel)]="selectedFolio.valor_facturacion_transportista">
  
        <h4 class="h4-subtitle">Tramo:</h4>
        <div class="input-container">
          <select class="input-perfil" [(ngModel)]="selectedFolio.tramo">
            <option [ngValue]="0">Seleccione un tramo</option>
            <option *ngFor="let tramo of tramos" [value]="tramo.id">
              {{tramo.origen}} - {{tramo.destino}}
            </option>
          </select>
        </div>
  
        <button class="custom-button-ingreso" (click)="modificarFolio()">Guardar Cambios</button>
      </div>
    </div>
  
    <!-- Tabla de Folios -->
    <table mat-table [dataSource]="folios" class="mat-elevation-z8" (click)="$event.stopPropagation()">
      <ng-container matColumnDef="id">
        <th mat-header-cell *matHeaderCellDef class="mat-header">ID</th>
        <td mat-cell *matCellDef="let folio" class="mat-cell">{{folio.id}}</td>
      </ng-container>
  
      <ng-container matColumnDef="nombre_folio_comercial">
        <th mat-header-cell *matHeaderCellDef class="mat-header">Folio Comercial</th>
        <td mat-cell *matCellDef="let folio" class="mat-cell">{{folio.nombre_folio_comercial}}</td>
      </ng-container>
  
      <ng-container matColumnDef="valor_pago_transportista">
        <th mat-header-cell *matHeaderCellDef class="mat-header">Valor Pago</th>
        <td mat-cell *matCellDef="let folio" class="mat-cell">{{folio.valor_pago_transportista}}</td>
      </ng-container>
  
      <ng-container matColumnDef="valor_facturacion_transportista">
        <th mat-header-cell *matHeaderCellDef class="mat-header">Valor Facturación</th>
        <td mat-cell *matCellDef="let folio" class="mat-cell">{{folio.valor_facturacion_transportista}}</td>
      </ng-container>
  
      <ng-container matColumnDef="nombre_tramo">
        <th mat-header-cell *matHeaderCellDef class="mat-header">Tramo</th>
        <td mat-cell *matCellDef="let folio" class="mat-cell">{{folio.nombre_tramo}}</td>
      </ng-container>
  
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;" 
          [class.selected]="isSelected(row)"
          (click)="selectRow(row); $event.stopPropagation()">
      </tr>
    </table>
  </div>
  
  <!-- Modal de Éxito -->
  <div id="exitoModal" class="modal-perfiles" *ngIf="modals['exitoModal']">
    <div class="modal-content">
      <h2>¡Éxito!</h2>
      <div class="exito-message">Operación completada exitosamente</div>
      <button class="custom-button" (click)="closeModal('exitoModal')">Cerrar</button>
    </div>
  </div>
  
  <!-- Modal de Error -->
  <div id="errorModal" class="modal-perfiles" *ngIf="modals['errorModal']">
    <div class="modal-content">
      <h2>¡Error!</h2>
      <div class="error-icon-container">
        <i class="fas fa-exclamation-triangle icon-exclamation-triangle"></i>
      </div>
      <div class="error-message">{{errorMessage}}</div>
      <button class="custom-button" (click)="closeModal('errorModal')">Cerrar</button>
    </div>
  </div>
  
  <!-- Modal de Confirmación para Eliminar -->
  <div id="confirmacionModal" class="modal-perfiles" *ngIf="modals['confirmacionModal']">
    <div class="modal-content">
      <h2>Confirmar Eliminación</h2>
      <div class="confirmacion-message">¿Está seguro que desea eliminar los folios seleccionados?</div>
      <div class="modal-actions">
        <button class="custom-button" (click)="eliminarFoliosSeleccionados()">Confirmar</button>
        <button class="custom-button" (click)="closeModal('confirmacionModal')">Cancelar</button>
      </div>
    </div>
  </div>