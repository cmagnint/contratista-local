<!-- change-password.component.html -->
<div class="change-password-container">
  <div class="change-password-card">
    
    <!-- Header -->
    <div class="header">
      <div class="icon-container">
        <span class="password-icon">🔐</span>
      </div>
      <h2 class="title">Cambiar Contraseña</h2>
      <p class="subtitle">Ingrese su nueva contraseña</p>
    </div>

    <!-- Formulario -->
    <form (ngSubmit)="changePassword()" class="password-form">
      
      <!-- Nueva Contraseña -->
      <div class="form-group">
        <label for="nuevaContrasena" class="form-label">Nueva Contraseña</label>
        <div class="input-container">
          <input 
            [type]="showPassword ? 'text' : 'password'"
            id="nuevaContrasena"
            name="nuevaContrasena"
            [(ngModel)]="nuevaContrasena"
            class="form-input"
            placeholder="Ingrese su nueva contraseña"
            required
            minlength="6"
            [disabled]="isLoading">
          <button 
            type="button" 
            class="toggle-password"
            (click)="togglePasswordVisibility()"
            [disabled]="isLoading">
            <span *ngIf="showPassword">👁️</span>
            <span *ngIf="!showPassword">🙈</span>
          </button>
        </div>
        <small class="form-help">Mínimo 6 caracteres</small>
      </div>

      <!-- Confirmar Contraseña -->
      <div class="form-group">
        <label for="confirmarContrasena" class="form-label">Confirmar Contraseña</label>
        <div class="input-container">
          <input 
            [type]="showConfirmPassword ? 'text' : 'password'"
            id="confirmarContrasena"
            name="confirmarContrasena"
            [(ngModel)]="confirmarContrasena"
            (ngModelChange)="onConfirmPasswordChange()"
            class="form-input"
            [class.error]="confirmarContrasena && nuevaContrasena !== confirmarContrasena"
            placeholder="Confirme su nueva contraseña"
            required
            [disabled]="isLoading">
          <button 
            type="button" 
            class="toggle-password"
            (click)="toggleConfirmPasswordVisibility()"
            [disabled]="isLoading">
            <span *ngIf="showConfirmPassword">👁️</span>
            <span *ngIf="!showConfirmPassword">🙈</span>
          </button>
        </div>
        
        <!-- Mensaje de error en tiempo real -->
        <small 
          class="form-error" 
          *ngIf="confirmarContrasena && nuevaContrasena !== confirmarContrasena">
          Las contraseñas no coinciden
        </small>
        
        <!-- Mensaje de éxito -->
        <small 
          class="form-success" 
          *ngIf="confirmarContrasena && nuevaContrasena === confirmarContrasena && nuevaContrasena.length >= 6">
          ✓ Las contraseñas coinciden
        </small>
      </div>

      <!-- Indicador de Fortaleza -->
      <div class="password-strength" *ngIf="nuevaContrasena">
        <div class="strength-label">Fortaleza de la contraseña:</div>
        <div class="strength-bar">
          <div 
            class="strength-fill"
            [ngClass]="getPasswordStrengthClass()">
          </div>
        </div>
        <small class="strength-text">
          <span 
            [ngClass]="{
              'weak-text': isWeakPassword(),
              'medium-text': isMediumPassword(),
              'strong-text': isStrongPassword()
            }">
            {{ getPasswordStrengthText() }}
          </span>
        </small>
      </div>

      <!-- Botones -->
      <div class="button-container">
        <button 
          type="button" 
          class="btn btn-secondary"
          (click)="cancelar()"
          [disabled]="isLoading">
          Cancelar
        </button>
        
        <button 
          type="submit" 
          class="btn btn-primary"
          [disabled]="isLoading || !nuevaContrasena || !confirmarContrasena || nuevaContrasena !== confirmarContrasena">
          
          <span *ngIf="!isLoading">
            <span class="btn-icon">🔐</span>
            Cambiar Contraseña
          </span>
          
          <span *ngIf="isLoading" class="loading-content">
            <span class="spinner"></span>
            Cambiando...
          </span>
        </button>
      </div>

    </form>

    <!-- Información adicional -->
    <div class="info-section">
      <div class="security-tips">
        <h4>💡 Consejos de seguridad:</h4>
        <ul>
          <li>Use al menos 8 caracteres</li>
          <li>Incluya mayúsculas y minúsculas</li>
          <li>Añada números y símbolos</li>
          <li>No use información personal</li>
        </ul>
      </div>
    </div>

  </div>
</div>